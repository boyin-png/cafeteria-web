<div class="page-wrapper">

    <header class="page-header lona-header">
        <div class="page-header-inner">
            <div>
                <h2>Dashboard</h2>
                <p class="page-meta">
                    <lucide-icon name="coffee" [size]="12"></lucide-icon>
                    Buen dia, {{ auth.currentUser()?.nombre }}
                </p>
            </div>
            <button class="btn btn-secondary btn-sm" (click)="recargar()" [disabled]="isLoading">
                <lucide-icon name="refresh-cw" [size]="14" [class.spin]="isLoading"></lucide-icon>
                Actualizar
            </button>
        </div>
    </header>

    <div class="metrics-grid">

        <div class="metric-card">
            <div class="metric-icon accent">
                <lucide-icon name="trending-up" [size]="24"></lucide-icon>
            </div>
            <div class="metric-info">
                <span class="metric-value">{{ metricas.ventasHoy | currency:"MXN":"symbol":"1.2-2" }}</span>
                <span class="metric-label">Ventas del dia</span>
            </div>
        </div>

        <div class="metric-card">
            <div class="metric-icon primary">
                <lucide-icon name="layout-grid" [size]="24"></lucide-icon>
            </div>
            <div class="metric-info">
                <span class="metric-value">{{ metricas.mesasActivas }}</span>
                <span class="metric-label">Mesas ocupadas</span>
            </div>
        </div>

        <div class="metric-card">
            <div class="metric-icon warning">
                <lucide-icon name="flame" [size]="24"></lucide-icon>
            </div>
            <div class="metric-info">
                <span class="metric-value">{{ metricas.enPreparacion }}</span>
                <span class="metric-label">En preparacion</span>
            </div>
        </div>

        <div class="metric-card" [class.alert-active]="metricas.alertasInventario > 0">
            <div class="metric-icon" [ngClass]="metricas.alertasInventario > 0 ? 'danger' : 'success'">
                <lucide-icon name="package" [size]="24"></lucide-icon>
            </div>
            <div class="metric-info">
                <span class="metric-value">{{ metricas.alertasInventario }}</span>
                <span class="metric-label">Alertas de stock</span>
            </div>
        </div>

    </div>

    <div class="card quick-actions" *ngIf="metricas.enPreparacion > 0 || metricas.alertasInventario > 0">
        <div class="card-header">
            <lucide-icon name="bell" [size]="18"></lucide-icon>
            Acciones sugeridas
        </div>
        <div class="actions-row">
            <button class="btn btn-primary" *ngIf="metricas.enPreparacion > 0" routerLink="/kds">
                <lucide-icon name="flame" [size]="15"></lucide-icon>
                Ver cocina
            </button>
            <button class="btn btn-secondary" *ngIf="metricas.alertasInventario > 0" routerLink="/admin/inventario">
                <lucide-icon name="alert-triangle" [size]="15"></lucide-icon>
                Ver alertas de stock
            </button>
            <button class="btn btn-secondary" routerLink="/admin/mesas">
                <lucide-icon name="layout-grid" [size]="15"></lucide-icon>
                Ver mesas
            </button>
        </div>
    </div>

</div>